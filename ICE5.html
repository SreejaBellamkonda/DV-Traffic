<!DOCTYPE html>
<html>
  <head>
    <title>ICE-5: Loading and Parsing CSV Data with D3.js</title>
    <script src="https://unpkg.com/d3@7.3.0/dist/d3.min.js" ></script>
    <style>
      
      pre {
        font-size: 5em ;
        text-align: center;
        background-color: #e0ffff;
      }
      h1 {
        font-size: 3em ;
        background-color: #6495ed ;
      }
      
    </style>
  </head>
  <body>
    
    <h1>We are learning how to load and parse data with  d3 today!</h1>
    <pre id="message-container_1"> 
         <img src = "https://raw.githubusercontent.com/SreejaBellamkonda/DV-Traffic/main/Traffic.svg
         "
         width ='100'
         height ='200' />
 </pre>
    <pre id = "message-container">
    </pre>
    <script>
      const csvUrl ="https://gist.githubusercontent.com/SreejaBellamkonda/2fd6d6b1b8daa7a241a8309b45c7ccf6/raw/26be54e44a1d7f4efdab7f88ef2e7f22c4d4f579/Traffic.csv";
 
            
        d3.csv(csvUrl).then((data) => {
          let message = 'The data Contains: \n';
          
          message = message + Math.round(d3.csvFormat(data).length / 1024 ) + ' kb\n';
          message = message + data.length + ' rows\n';
          message = message + ' and ' + data.columns.length + ' Columns';
          document.getElementById('message-container').textContent = message;
        });

        fetch(csvUrl)
        .then(text => text.text())
        .then(text => {
            const data = d3.csvParse(text);
            console.log(Math.round(d3.csvFormat(data).length/1024) + ' KB\n');
            console.log(data.length + ' rows\n');
            console.log(data.columns.length + ' columns');
        });
 
    </script>
  </body>
</html>
